{% extends 'boilerplate.html' %}
{% block body %}
<button class="btn btn-primary" popovertarget="create">Create</button>
<div popover id="create">
    <form id="eventForm" method="post">
        <div>
            <label for="name">Event Name:</label>
            <input type="text" id="name" name="name" required >
        </div>
        
        <div>
            <label for="start">Start Time:</label>
            <input type="datetime-local" id="start" name="start" required >
        </div>
        
        <div>
            <label for="end">End Time:</label>
            <input type="datetime-local" id="end" name="end" required >
        </div>
        
        <div>
            <label for="locName">Location Name:</label>
            <input type="text" id="locName" name="locName" required >
        </div>
        
        <div>
            <label for="lat">Latitude:</label>
            <input type="number" id="lat" name="lat" step="any" required >
        </div>
        
        <div>
            <label for="long">Longitude:</label>
            <input type="number" id="long" name="long" step="any" required>
        </div>

        <div>
            <label for="secret">ShhhðŸ¤«</label>
            <input type="text" id="secret" name="secret" required>
        </div>
        
        <button type="submit">Submit</button>
    </form>
</div>
{% for event in events %}
    <div>
    <h2>{{event.name}}</h2>
    <p>Timings: {{event.startTime|toIST}} to {{event.endTime|toIST}}</p>
    {% for location in event.locations %}
    <p>{{location.name}}: {{location.latitude}}, {{location.longitude}}</p>
    <button class="btn btn-danger" popovertarget="delete">Delete</button>
    <button class="btn btn-success" popovertarget="edit">Edit</button>
    <div popover id="edit">
        <form id="eventForm" action="/shakalakaboomboom/edit/{{event._id}}" method="post">
            <div>
                <label for="name">Event Name:</label>
                <input type="text" id="name" name="name" required  value="{{event.name}}">
            </div>
            
            <div>
                <label for="start">Start Time:</label>
                <input type="datetime" id="startTime" name="startTime" required value="{{event.startTime}}">
            </div>
            
            <div>
                <label for="end">End Time:</label>
                <input type="datetime" id="endTime" name="endTime" required value="{{event.endTime}}">
            </div>
            
            <div>
                <label for="locName">Location Name:</label>
                <input type="text" id="locName" name="locName" required  value="{{event.locations[0].name}}">
            </div>
            
            <div>
                <label for="lat">Latitude:</label>
                <input type="number" id="lat" name="lat" step="any" required  value="{{event.locations[0].latitude}}">
            </div>
            
            <div>
                <label for="long">Longitude:</label>
                <input type="number" id="long" name="long" step="any" required value="{{event.locations[0].longitude}}">
            </div>
    
            <div>
                <label for="secret">ShhhðŸ¤«</label>
                <input type="text" id="secret" name="secret" required>
            </div>
            
            <button type="submit">Submit</button>
        </form>
    </div>
    <div popover id="delete">
        <form id="deleteForm" action="/shakalakaboomboom/delete/{{event._id}}" method="post">
            <p>Are you sure you want to delete this event? If yes, enter the key</p>    
            <div>
                <label for="secret">ShhhðŸ¤«</label>
                <input type="text" id="secret" name="secret" required>
            </div>
            
            <button type="submit">Submit</button>
        </form>
    </div>
    {% endfor %}
    </div>
{% endfor %}
{% endblock %}